<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit User</title>
  <link rel="stylesheet" href="/css/style.css">
  <style>
    label { font-weight: bold; }
    .form-section { background: #fff; padding: 20px; border-radius: 5px; }
    .form-section h5 { margin-bottom: 20px; }
  </style>
</head>
<body>
  <div id="wrapper">
    <!-- Sidebar -->
    <div class="bg-light border-end" id="sidebar-wrapper">
      <div class="sidebar-heading">CRM System</div>
      <div class="list-group list-group-flush">
        <a href="/dashboard" class="list-group-item list-group-item-action">Dashboard</a>
        <a href="/customer/manage" class="list-group-item list-group-item-action">Customers</a>
        <a href="/deposit/manage" class="list-group-item list-group-item-action">Deposits</a>
        <a href="/withdrawal/manage" class="list-group-item list-group-item-action">Withdrawals</a>
        <a href="/game/manage" class="list-group-item list-group-item-action">Game Accounts</a>
        <a href="/setting/manage-user" class="list-group-item list-group-item-action">Settings</a>
        <a href="/logout" class="list-group-item list-group-item-action text-danger">Logout</a>
      </div>
    </div>

    <!-- Page Content -->
    <div id="page-content-wrapper">
      <!-- Topbar -->
      <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
        <div class="container-fluid">
          <span class="navbar-brand">Edit User</span>
          <div class="d-flex ms-auto">
            <span class="me-3">Hi, <%= user.username %></span>
            <a href="/edit-user"><img src="/img/user.png" alt="user" width="32" height="32"/></a>
          </div>
        </div>
      </nav>

      <div class="container-fluid mt-4">
        <% if (msg) { %>
          <div class="alert alert-info"><%= msg %></div>
        <% } %>

        <form method="POST" action="/edit-user">
          <div class="row">
            <div class="col-md-6 form-section">
              <h5>Profile Information</h5>
              <div class="mb-3">
                <label>First Name</label>
                <input type="text" class="form-control" name="first_name" value="<%= user.first_name %>">
              </div>
              <div class="mb-3">
                <label>Last Name</label>
                <input type="text" class="form-control" name="last_name" value="<%= user.last_name %>">
              </div>
              <div class="mb-3">
                <label>Gender</label>
                <select class="form-control" name="gender">
                  <option value="Male" <%= user.gender === 'Male' ? 'selected' : '' %>>Male</option>
                  <option value="Female" <%= user.gender === 'Female' ? 'selected' : '' %>>Female</option>
                </select>
              </div>
              <div class="mb-3">
                <label>Email</label>
                <input type="email" class="form-control" name="email" value="<%= user.email %>">
              </div>
              <div class="mb-3">
                <label>Phone</label>
                <input type="text" class="form-control" name="phone" value="<%= user.phone %>">
              </div>
              <div class="mb-3">
                <label>Date of Birth</label>
                <input type="date" class="form-control" name="dob" value="<%= user.dob %>">
              </div>
              <div class="mb-3">
                <label>Status</label>
                <select class="form-control" name="status">
                  <option value="1" <%= user.status == 1 ? 'selected' : '' %>>Active</option>
                  <option value="0" <%= user.status == 0 ? 'selected' : '' %>>Inactive</option>
                </select>
              </div>
              <div class="mb-3">
                <label>Auto Shift</label>
                <select class="form-control" name="auto_shift">
                  <option value="1" <%= user.auto_shift == 1 ? 'selected' : '' %>>Yes</option>
                  <option value="0" <%= user.auto_shift == 0 ? 'selected' : '' %>>No</option>
                </select>
              </div>
              <div class="mb-3">
                <label>Username</label>
                <input type="text" class="form-control" name="username" value="<%= user.username %>">
              </div>
            </div>

            <div class="col-md-6 form-section">
              <h5>Change Password</h5>
              <div class="mb-3">
                <label>New Password</label>
                <input type="password" class="form-control" name="new_password">
              </div>
              <div class="mb-3">
                <label>Confirm Password</label>
                <input type="password" class="form-control" name="confirm_password">
              </div>
            </div>
          </div>

          <div class="mt-3 text-center">
            <button type="submit" class="btn btn-success">Update Profile</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
</html>
